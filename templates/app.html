{% extends "layout.html" %}

{% block body %}

<script type="text/javascript" src= "http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.js"></script>
<style>
table,th,td
{
border:1px solid black;
}
</style>

Current session: {{ session }}
<ul>
{% for e in es %}
<li>{{ e.sn }}: {{ e.content}}</li>
{% endfor %}
</ul>
<ul>
{% for h in hs %}
<li>{{ h.sn }}: {{ h.content}}</li>
{% endfor %}
</ul>

<table id="comp_hypothesis_table">
<thead>
<tr>
<th>Evidence no</th>
<th>Enter Evidence</th>
<th>Credibility</th>
<th>Relevance</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
<button id="newevi">Add Evidence</button>
<button id="newhypo">New Hypothesis</button>


<script>
$("#newhypo").click(function(data, status){
	$.get("/add_hypothesis", function(data, status){
		$("#comp_hypothesis_table thead tr").append($("<th>").append(data.h_sn));
		$("#comp_hypothesis_table tbody tr").append($("<td>"))
	})
})

function name_e(){
	var e_sn = $(this).parents("tr").find(".e_sn").text();
	var e_name = $(this).val();
	var obj = {
		evidence : e_sn,
		content : e_name
		};
	$.get("name_evidence", obj, console.log("success"))
	}

$("#newevi").click(function(data, status){
		var hypo_num = 0;
		$.get("/get_hypotheses", function(data, status){
			hypo_num = Object.keys(data).length
		})
		$.get("/add_evidence", function(data, status){
				var row = ($("<tr>")
				.append($("<td>").append(data.e_sn).addClass("e_sn"))
				.append($("<td>").append($("<input>").attr("type", "text").addClass("e_name").change(name_e)))
				.append($("<td>")
				.append("<select><option value='low'>Low</option><option value='medium'>Medium</option><option value=high>High</option>"))
				.append($("<td>")
				.append("<select><option value='low'>Low</option><option value='medium'>Medium</option><option value=high>High</option>"))
			);
			for (i=0; i<hypo_num; i++){
				row.append($("<td>"))
			}
			$("#comp_hypothesis_table tbody").append(row)
		})
	})
</script>
{% endblock %}